{% extends "base.html" %}
{% block content %}

<h3>All Recipes</h3>

<!-- search bar -->

<div class="row">
  <form action="{{ url_for('search') }}" method="post" class="col s12">
    <div class="row center-align">
      <div class="input-field col s12 m8">
        <i class="fas fa-search prefix"></i>
        <input type="text" name="query" id="query" class="validate">
        <label for="query">Search</label>
      </div>
      <div class="col s12 m4 col-search">
        <a href="{{ url_for('get_recipes') }}"><i class="fas fa-times fa-7x red btn"></i></a>
        <button class="btn green" type="submit">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
  </form>
</div>

{% if recipes|length > 0 %}
<div class="row">
  {% for recipe in recipes %}
  <a href="{{ url_for('view_recipe', recipe_id=recipe._id) }}">
    <div class="col s12 m6 l4">
      <div class="card">
        <div class="card-image">
          <!-- if image url exists, use that-->
          {% if recipe.recipe_img %}
          <img src="{{ recipe.recipe_img }}">
          <!-- else, use default image -->
          {% else %}
          <img src="../static/img/vegetables1.jpg">
          {% endif %}
          <form action="{{ url_for('add_favorite', username=session['user'], recipe_id=recipe._id) }}" method="POST">
            <button type="submit" id="heart_btn"
              class="btn tooltipped btn-floating halfway-fab green modal-trigger btn-small" data-position="bottom"
              data-tooltip="Add to Favorites"><i class="fas fa-heart"></i></button>
          </form>
          <a href="" id="rate_btn" class="btn tooltipped btn-floating halfway-fab green modal-trigger btn-small"
            data-position="bottom" data-tooltip="Give a Rating"><i class="fas fa-star"></i></a>
          </div>
        <div class="card-content">
          <a href="{{ url_for('view_recipe', recipe_id=recipe._id) }}" class="card-title">{{ recipe.recipe_name }}</a>
          <p>{{ recipe.recipe_description }}</p>
          <p>Difficulty: {{ recipe.difficulty_name }}</p>
          <p>Category: {{ recipe.category_name }}</p>
          <p><em>Added by: {{ recipe.created_by }}</em></p>
        </div>
      </div>
    </div>
  </a>
  {% endfor %}

</div>
{% else %}
<h4>No Results Found</h4>
{% endif %}

{% endblock %}